# TF2Jail-Redux #

## Языки
 - [English](https://github.com/Scags/TF2-Jailbreak-Redux/blob/develop/README.md)
 
Рождённый из-за моей неприязни к неорганизованному и неразберихе в оригинальном плагине TF2Jail, я пошёл и полностью его переписал, открыв игровой процесс Jailbreak в удобном API, очень удобном для разработчиков. Плагин в целом создан с учётом потребностей разработчиков с целью сделать создание последнего желания и управление событиями максимально упрощённым.

Взгляните на [вики](https://github.com/Scags/TF2-Jailbreak-Redux/wiki)(англ.) для не только полного руководства по настройке пользовательского последнего желания, но и подробных инструкций и объяснений по каждому аспекту плагина.

Отдельное спасибо:

- Nergal/Assyrian за несколькие аспекты (плюс модуль последнего желания), взятыми из [VSH2](https://forums.alliedmods.net/showthread.php?t=286701).
  
- Drixevel за [оригинальный плагин](https://forums.alliedmods.net/showthread.php?p=2015905).
  
- FlaminSarge за плагин [Be the Horsemann](https://forums.alliedmods.net/showthread.php?t=166819).
  
- -MCG-retsam и Antithasys за [Aim Names](https://forums.alliedmods.net/showthread.php?t=114586).
  
- И другие.
 
## Особенности ##
- 13 отшлифованных, готовых к использованию последних желаний для использования на вашем сервере.
- Примерно половина была в оригинальном TF2Jail, вторую половину я просто вытащил из своей задницы.
- Последнее случайное желание также является дополнением, потому что кому не нравится хороший RNG?
- Более точное управление боеприпасами. Возможно, мог бы исправить старую ошибку щита подрывника, но не спрашивайте меня об этом.
- Больше никаких злоупотреблений с Фридэем, используя Бронепанцирь, удар по нему удаляет ваш Фридэй сейчас
- Больше опций заглушения, управляемых через переменную.
- Дополнительные вещи для командира, такие как маяки и лазерный указатель.
- В плагин встроены игровые режимы БоевогоДня.
- Удвоена длина имени последнего желания.
- При желании брать боеприпасы в качестве во время Фридэя может быть запрещено.
- Озарение не так уж и дёшево использовать во время БоевогоДня
- Заглушенные игроки не могут присоединиться к команде Синих при желании.
- Множество фильтров цели:
    - @warden
    - @!warden
    - @freedays
    - @!freedays
    - @rebels
    - @!rebels
    - *Используйте нижеприведённое на свой страх и риск:*
    - @freedayloc
    - @!freedayloc
    - @wardayred
    - @!wardayred
    - @wardayblue
    - @!wardayblue
    - @wardayloc
    - @!wardayloc
    - @medic
    - @!medic
 - И т.д.

## Другие дополнения ##
  **[WeaponBlocker](https://github.com/Scags/TF2JailRedux-WeaponBlocker)** - Блокировщик оружия, который действительно работает с этим плагином.
  
  **[Mechanized Mercenaries](https://github.com/Scags/TF2-LRModule-MechMercs)** - Последнее желание, где все превращаются в танки!
  
  **[Search](https://forums.alliedmods.net/showthread.php?p=2677653#post2677653)** - Позволяет охранникам искать заключённых.

## Требования ##

###### [TF2Items](https://forums.alliedmods.net/showthread.php?p=1050170) ######

###### [TF2Attributes](https://forums.alliedmods.net/showthread.php?t=210221) (необязательный) ######

###### SourceMod 1.10+ ######

## Установка ##
Подробную установку можно найти в [вики](https://github.com/Scags/TF2-Jailbreak-Redux/wiki/Installation-Guide)(англ.) вместе с дизайном конфигурации.

## Файловая структура ##
Весь плагин организован в файлы, связанные с тем, какие функции находятся в них:

- **TF2Jail_Redux.sp**- Содержит основную структуру плагина, переменные, native разработку и функции, вызываемые в jailhandler и из него.
  
- **jailhandler.sp**- Обрабатывает большинство основных игровых функций. В основном зазывает forward'ы
  
- **jailevents.sp**- Управление событиями.
  
- **jailcommands.sp**- Очевидно команды. Здесь также находятся связанные с ними меню.
  
- **jailbase.sp**- Структура Methodmap для игроков, которая содержит логику для коренных native'ах, найденных в player.inc.
  
- **jailgamemode.sp**- Структура Methodmap для игрового режима, содержащая логику для native'ов, найденных в gamemode.inc.
  
- **stocks.inc**- Несколько удобных функций stock.
  
- **jailforwards.sp**- Частные вызовы forward'ов. Это также выполняет hook функции последнего желания.
  
- **functable.sp**- Содержит диспетчер hook'ов функции последнего желания.
  
- **natives.sp**- Управляет всеми native вызовами.
  
- **targetfilters.sp**- Обрабатывает callback'и и создание настраиваемых фильтров цели.
  
- **tf2jailredux.inc**- Основной API плагина включает player.inc, gamemode.inc, hook.inc и lastrequest.inc.

- **TF2JR_BaseLRs.sp**- Это include менеджер последнего желания. Каждый include тип последнего желания относится к своему собственному файлу в папке BaseLRs.
  
## Дополнительные плагины ##
Хотя базовый плагин хорошо организован, доп-плагины по-прежнему являются эффективным способом управления игровым процессом. Существует множество частных forward'ов, к которым можно подключиться, и огромный набор native'ов для управления игроками, игровым процессом и последними желаниями. Посетите [вики](https://github.com/Scags/TF2-Jailbreak-Redux/wiki/API)(англ.) для большей информации.
